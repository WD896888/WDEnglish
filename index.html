<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>英语练习题</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="grammar-fill.css">
    <link rel="stylesheet" href="translation-fill.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-decoration">
        <div class="bubble bubble-1"></div>
        <div class="bubble bubble-2"></div>
        <div class="bubble bubble-3"></div>
        <div class="bubble bubble-4"></div>
        <div class="bubble bubble-5"></div>
    </div>
    
    <div class="container">
        <div class="header">
            <h1 class="title">
                <span class="title-icon">📚</span>
                WDEnglish
            </h1>
            <p class="subtitle" id="subtitle">拾起散落的语言碎片，拼凑属于自己的表达</p>
        </div>
        
        <div class="menu">
            <button class="menu-item active">
                <span class="menu-icon">🔗</span>
                连词成句
            </button>
            <button class="menu-item">
                <span class="menu-icon">📝</span>
                语法填空
            </button>
            <button class="menu-item">
                <span class="menu-icon">🌐</span>
                翻译填空
            </button>
             <button class="menu-item disabled">
                <span class="menu-icon">🧩</span>
                阅读填空
                <span class="pending">更多功能敬请期待</span>
            </button>           
            <button class="menu-item disabled">
                <span class="menu-icon">📖</span>
                阅读理解
                <span class="pending">更多功能敬请期待</span>
            </button>
            <button class="menu-item disabled">
                <span class="menu-icon">✍️</span>
                英语作文
                <span class="pending">更多功能敬请期待</span>
            </button>
        </div>
        
        <div class="exercise-card">
            <div class="card-header">
                <h2>连词成句</h2>
                <div class="progress-indicator">
                    <span id="questionNumber">1</span>
                    <span class="divider">/</span>
                    <span id="totalQuestions">100</span>
                </div>
            </div>
            

            
            <div id="wordsContainer" class="words-container">
                <!-- Words will be dynamically placed here -->
            </div>
            
            <div class="actions">
                <button id="prevBtn" class="btn btn-prev">
                    <span class="btn-icon">←</span>
                    上一题
                </button>
                <button id="checkBtn" class="btn btn-check">
                    <span class="btn-icon">✓</span>
                    检查答案
                </button>
                <button id="nextBtn" class="btn btn-next">
                    下一题
                    <span class="btn-icon">→</span>
                </button>
            </div>
            
            <div id="result" class="result"></div>
            <div id="explanation" class="explanation"></div>
        </div>

        <div class="exercise-card grammar-card hidden">
            <div class="card-header">
                <h2>语法填空</h2>
                <div class="progress-indicator">
                    <span id="grammarQuestionNumber">1</span>
                    <span class="divider">/</span>
                    <span id="grammarTotalQuestions">1</span>
                </div>
            </div>

            <div id="grammarContent" class="grammar-content">
                <!-- 动态渲染题目内容 -->
            </div>

            <div class="actions">
                <button id="grammarPrevBtn" class="btn btn-prev">
                    <span class="btn-icon">←</span>
                    上一题
                </button>
                <button id="grammarCheckBtn" class="btn btn-check">
                    <span class="btn-icon">✓</span>
                    检查答案
                </button>
                <button id="grammarNextBtn" class="btn btn-next">
                    下一题
                    <span class="btn-icon">→</span>
                </button>
            </div>

            <div id="grammarResult" class="result"></div>
            <div id="grammarExplanation" class="explanation"></div>
        </div>

        <div class="exercise-card translation-card hidden">
            <div class="card-header">
                <h2>翻译填空</h2>
                <div class="progress-indicator">
                    <span id="translationQuestionNumber">1</span>
                    <span class="divider">/</span>
                    <span id="translationTotalQuestions">1</span>
                </div>
            </div>

            <div id="translationContent" class="translation-content">
                <!-- 动态渲染题目内容 -->
            </div>

            <div class="actions">
                <button id="translationPrevBtn" class="btn btn-prev">
                    <span class="btn-icon">←</span>
                    上一组
                </button>
                <button id="translationCheckBtn" class="btn btn-check">
                    <span class="btn-icon">✓</span>
                    检查答案
                </button>
                <button id="translationNextBtn" class="btn btn-next">
                    下一组
                    <span class="btn-icon">→</span>
                </button>
            </div>

            <div id="translationResult" class="result"></div>
            <div id="translationExplanation" class="explanation"></div>
        </div>

        <div class="ai-chat-card">
            <div class="card-header">
                <h2>AI英语助手 <span class="ai-status-indicator"><span class="status-dot"></span><span class="status-text">在线</span></span></h2>
                <button id="newChatBtn" class="new-chat-btn">
                    <span class="new-chat-icon">🐾</span>
                    新建对话
                </button>
            </div>

            <div id="chatMessages" class="chat-messages">
                <div class="chat-messages-wrapper">
                    <div class="chat-message ai-message">
                        <div class="message-avatar has-image">
                            <img src="史迪仔.png" alt="AI头像">
                        </div>
                        <div class="message-content">
                            <div class="message-text">你好！我是你的AI英语学习助手。你可以问我任何关于英语语法、词汇、翻译的问题，我会尽力帮助你！</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="chatInput" 
                        class="chat-input" 
                        placeholder="输入你的问题..."
                        autocomplete="off"
                    >
                    <button id="sendBtn" class="send-btn">
                        <span class="send-icon">➤</span>
                    </button>
                </div>
                <div class="input-hint">按 Enter 发送消息</div>
            </div>
        </div>
    </div>
    
    <!-- 头像更换模态窗口 -->
    <div id="avatarModal" class="avatar-modal">
        <div class="avatar-modal-overlay"></div>
        <div class="avatar-modal-content">
            <div class="avatar-modal-header">
                <h3>更换头像</h3>
                <button class="avatar-modal-close" id="closeAvatarModal">&times;</button>
            </div>
            <div class="avatar-modal-body">
                <div class="avatar-preview-container">
                    <div class="avatar-preview">
                        <img id="avatarPreviewImg" src="" class="avatar-preview-img">
                        <span id="avatarPreviewDefault" class="avatar-preview-default">👤</span>
                    </div>
                </div>
                <div class="avatar-presets-section">
                    <p class="presets-title">或选择预设头像</p>
                    <div class="avatar-presets">
                        <div class="avatar-preset" data-avatar="用户1.png">
                            <img src="用户1.png" alt="预设头像1">
                        </div>
                        <div class="avatar-preset" data-avatar="用户2.jpg">
                            <img src="用户2.jpg" alt="预设头像2">
                        </div>
                        <div class="avatar-preset" data-avatar="用户3.jpg">
                            <img src="用户3.jpg" alt="预设头像3">
                        </div>
                    </div>
                </div>
                <div class="avatar-upload-section">
                    <label for="avatarUpload" class="avatar-upload-btn">
                        <span class="upload-icon">📷</span>
                        选择图片
                    </label>
                    <input type="file" id="avatarUpload" accept="image/*" class="avatar-upload-input" hidden>
                    <p class="upload-hint">支持 JPG、PNG、GIF 格式，建议尺寸 200x200 像素</p>
                </div>
                <div class="avatar-advanced-section">
                    <button class="avatar-advanced-toggle" id="advancedToggle">
                        <span class="advanced-icon">⚙️</span>
                        高级功能
                        <span class="toggle-arrow">▼</span>
                    </button>
                    <div class="avatar-advanced-content" id="advancedContent">
                        <div class="advanced-item">
                            <label class="advanced-label">名称：</label>
                            <input type="text" id="aiNameInput" class="advanced-input" placeholder="AI英语助手">
                        </div>
                        <div class="advanced-item">
                            <label class="advanced-label">模型：</label>
                            <select id="modelSelect" class="advanced-select">
                                <option value="glm-5">GLM-5</option>
                                <option value="Kimi-K2.5">Kimi-K2.5</option>
                                <option value="qwen3.5-plus">Qwen3.5-plus</option>
                                <option value="MiniMax-M2.1">MiniMax-M2.1</option>
                                <option value="deepseek-v3.2">DeepSeek-V3.2</option>
                            </select>
                        </div>
                        <div class="advanced-item">
                            <label class="advanced-label">系统提示词：</label>
                            <textarea id="systemPromptInput" class="advanced-textarea" rows="4" placeholder="请输入系统提示词"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="avatar-modal-footer">
                <button class="avatar-btn avatar-btn-reset" id="resetAvatarBtn">重置</button>
                <button class="avatar-btn avatar-btn-cancel" id="cancelAvatarBtn">取消</button>
                <button class="avatar-btn avatar-btn-confirm" id="confirmAvatarBtn">确认更换</button>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.19.0/js/md5.min.js"></script>
    <script src="baidu-translate.js"></script>
    <script src="ai-service.js"></script>
    <script src="script.js"></script>
    <script src="grammar-fill.js"></script>
    <script src="translation-fill.js"></script>
</body>
</html>
